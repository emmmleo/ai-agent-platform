# CodeHubix é¡¹ç›®æ¦‚è§ˆ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

CodeHubix æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½ä½“ç®¡ç†å¹³å°ï¼Œæä¾›æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ã€å·¥ä½œæµï¼ˆWorkflowï¼‰å’Œæ’ä»¶ï¼ˆPluginï¼‰çš„ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æŠ€æœ¯æ ˆ

**åç«¯ (Backend)**
- **æ¡†æ¶**: Spring Boot 3.5.6
- **Javaç‰ˆæœ¬**: Java 21
- **æ•°æ®åº“**: MySQL 8.0
- **ORM**: MyBatis 3.0.5
- **å®‰å…¨**: Spring Security + JWT
- **æ„å»ºå·¥å…·**: Maven

**å‰ç«¯ (Frontend)**
- **æ¡†æ¶**: Vue 3.5.24
- **æ„å»ºå·¥å…·**: Vite 7.2.2
- **è·¯ç”±**: Vue Router 4.6.3
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.7
- **è¯­è¨€**: TypeScript 5.9.3

**æ•°æ®åº“ (Database)**
- **æ•°æ®åº“**: MySQL 8.0 (Docker)
- **ç®¡ç†å·¥å…·**: phpMyAdmin (Docker)

### é¡¹ç›®ç›®å½•ç»“æ„

```
codehubix/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â”œâ”€â”€ java/
â”‚   â”‚       â”‚   â””â”€â”€ com/aiagent/
â”‚   â”‚       â”‚       â”œâ”€â”€ Application.java          # ä¸»å¯åŠ¨ç±»
â”‚   â”‚       â”‚       â”œâ”€â”€ agent/                    # æ™ºèƒ½ä½“æ¨¡å—
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ controller/           # æ§åˆ¶å™¨
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ dto/                  # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ entity/               # å®ä½“ç±»
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ mapper/               # MyBatis Mapperæ¥å£
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ service/              # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚       â”‚       â”œâ”€â”€ knowledgebase/            # çŸ¥è¯†åº“æ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ workflow/                 # å·¥ä½œæµæ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ plugin/                   # æ’ä»¶æ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ user/                     # ç”¨æˆ·æ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ menu/                     # èœå•æ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ role/                     # è§’è‰²æ¨¡å—
â”‚   â”‚       â”‚       â”œâ”€â”€ security/                 # å®‰å…¨æ¨¡å—ï¼ˆJWTï¼‰
â”‚   â”‚       â”‚       â””â”€â”€ config/                   # é…ç½®ç±»
â”‚   â”‚       â”‚           â”œâ”€â”€ DataInitializer.java  # æ•°æ®åˆå§‹åŒ–ï¼ˆåˆ›å»ºé»˜è®¤ç”¨æˆ·å’Œèœå•ï¼‰
â”‚   â”‚       â”‚           â”œâ”€â”€ DataSourceConfig.java
â”‚   â”‚       â”‚           â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚       â”‚           â””â”€â”€ ...
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â”œâ”€â”€ application.yml               # åº”ç”¨é…ç½®
â”‚   â”‚           â”œâ”€â”€ mapper/                      # MyBatis XMLæ˜ å°„æ–‡ä»¶
â”‚   â”‚           â””â”€â”€ logback/                     # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ pom.xml                                   # Mavenä¾èµ–é…ç½®
â”‚   â””â”€â”€ logs/                                     # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ frontend/                    # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                  # APIæ¥å£å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledgebase.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ workflow.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ plugin.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ views/                # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentList.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentForm.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeBaseList.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowList.vue
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/               # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ package.json              # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts            # Viteé…ç½®
â”‚
â””â”€â”€ docker-mysql/                # Dockeræ•°æ®åº“é…ç½®
    â””â”€â”€ docker-compose.yml        # MySQLå’ŒphpMyAdminå®¹å™¨é…ç½®
```

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. **ç”¨æˆ·è®¤è¯ä¸æˆæƒ**
- JWT Token è®¤è¯
- è§’è‰²æƒé™ç®¡ç†ï¼ˆROLE_ADMIN, ROLE_USERï¼‰
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†

### 2. **æ™ºèƒ½ä½“ç®¡ç† (Agent)**
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ™ºèƒ½ä½“
- æ™ºèƒ½ä½“é…ç½®ï¼ˆç³»ç»Ÿæç¤ºè¯ã€ç”¨æˆ·æç¤ºè¯æ¨¡æ¿ã€æ¨¡å‹é…ç½®ï¼‰
- å…³è”çŸ¥è¯†åº“ã€å·¥ä½œæµã€æ’ä»¶
- æ™ºèƒ½ä½“æµ‹è¯•å’ŒèŠå¤©åŠŸèƒ½

### 3. **çŸ¥è¯†åº“ç®¡ç† (Knowledge Base)**
- çŸ¥è¯†åº“çš„åˆ›å»ºå’Œç®¡ç†
- æ–‡æ¡£çš„ä¸Šä¼ å’Œç®¡ç†
- çŸ¥è¯†åº“ä¸æ™ºèƒ½ä½“çš„å…³è”

### 4. **å·¥ä½œæµç®¡ç† (Workflow)**
- å·¥ä½œæµçš„åˆ›å»ºå’Œç¼–è¾‘
- å·¥ä½œæµæ‰§è¡Œ
- å·¥ä½œæµä¸æ™ºèƒ½ä½“çš„å…³è”

### 5. **æ’ä»¶ç®¡ç† (Plugin)**
- æ’ä»¶çš„æ³¨å†Œå’Œç®¡ç†
- æ’ä»¶è¯¦æƒ…æŸ¥çœ‹
- æ’ä»¶ä¸æ™ºèƒ½ä½“çš„å…³è”

### 6. **èœå•ç®¡ç† (Menu)**
- åŠ¨æ€èœå•é…ç½®
- åŸºäºè§’è‰²çš„èœå•æƒé™æ§åˆ¶

## ğŸš€ è¿è¡Œæµç¨‹

### å‰ç½®è¦æ±‚

- **Java 21** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js** å’Œ **npm**ï¼ˆç”¨äºå‰ç«¯ï¼‰
- **Maven**ï¼ˆç”¨äºåç«¯æ„å»ºï¼‰
- **Docker** å’Œ **Docker Compose**ï¼ˆç”¨äºæ•°æ®åº“ï¼‰

### æ­¥éª¤ 1: å¯åŠ¨æ•°æ®åº“æœåŠ¡

```bash
# è¿›å…¥docker-mysqlç›®å½•
cd docker-mysql

# å¯åŠ¨MySQLå’ŒphpMyAdminå®¹å™¨
docker-compose up -d

# éªŒè¯å®¹å™¨æ˜¯å¦è¿è¡Œ
docker ps
```

**é…ç½®è¯´æ˜ï¼š**
- MySQL ç«¯å£: `3306`
- phpMyAdmin ç«¯å£: `8081` (è®¿é—® http://localhost:8081)
- æ•°æ®åº“å: `demo_db`
- ç”¨æˆ·å: `demo_user`
- å¯†ç : `demo_pass_123`
- Rootå¯†ç : `root123456`

### æ­¥éª¤ 2: é…ç½®åç«¯

åç«¯é…ç½®ä½äº `backend/src/main/resources/application.yml`ï¼š

```yaml
spring:
  datasource:
    jdbc-url: jdbc:mysql://localhost:3306/demo_db?...
    username: demo_user
    password: demo_pass_123

server:
  port: 8082
  servlet:
    context-path: /api
```

**é‡è¦è¯´æ˜ï¼š**
- åç«¯æœåŠ¡ç«¯å£: `8082`
- APIè·¯å¾„å‰ç¼€: `/api`
- æ•°æ®åº“è¿æ¥ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ï¼ˆé€šè¿‡MyBatiså’ŒDataInitializerï¼‰

### æ­¥éª¤ 3: å¯åŠ¨åç«¯æœåŠ¡

```bash
# è¿›å…¥backendç›®å½•
cd backend

# æ–¹å¼1: ä½¿ç”¨Mavenè¿è¡Œ
mvn spring-boot:run

# æ–¹å¼2: å…ˆç¼–è¯‘å†è¿è¡Œ
mvn clean package
java -jar target/demo-0.0.1-SNAPSHOT.jar
```

**åç«¯å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ï¼š**
1. è¿æ¥MySQLæ•°æ®åº“
2. é€šè¿‡`DataInitializer`åˆ›å»ºé»˜è®¤ç”¨æˆ·ï¼š
   - ç®¡ç†å‘˜: `admin` / `123456`
   - æ™®é€šç”¨æˆ·: `user` / `123456`
3. åˆå§‹åŒ–èœå•æ•°æ®

**åç«¯æ—¥å¿—ä½ç½®ï¼š** `backend/logs/`

### æ­¥éª¤ 4: å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# è¿›å…¥frontendç›®å½•
cd frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**å‰ç«¯é…ç½®ï¼š**
- å¼€å‘æœåŠ¡å™¨ç«¯å£: `5173` (é»˜è®¤)
- APIä»£ç†: å‰ç«¯è¯·æ±‚ `/api/*` ä¼šè‡ªåŠ¨ä»£ç†åˆ° `http://localhost:8082/api`
- è®¿é—®åœ°å€: http://localhost:5173

### æ­¥éª¤ 5: è®¿é—®åº”ç”¨

1. **å‰ç«¯åº”ç”¨**: http://localhost:5173
2. **phpMyAdmin**: http://localhost:8081
3. **åç«¯API**: http://localhost:8082/api

### é»˜è®¤ç™»å½•è´¦å·

- **ç®¡ç†å‘˜è´¦å·**: 
  - ç”¨æˆ·å: `admin`
  - å¯†ç : `123456`
  - è§’è‰²: `ROLE_ADMIN`

- **æ™®é€šç”¨æˆ·è´¦å·**: 
  - ç”¨æˆ·å: `user`
  - å¯†ç : `123456`
  - è§’è‰²: `ROLE_USER`

## ğŸ“¡ APIæ¥å£è¯´æ˜

åç«¯APIåŸºç¡€è·¯å¾„: `http://localhost:8082/api`

ä¸»è¦æ¥å£æ¨¡å—ï¼š
- `/api/auth/*` - è®¤è¯ç›¸å…³ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- `/api/users/*` - ç”¨æˆ·ç®¡ç†
- `/api/agents/*` - æ™ºèƒ½ä½“ç®¡ç†
- `/api/knowledge-bases/*` - çŸ¥è¯†åº“ç®¡ç†
- `/api/workflows/*` - å·¥ä½œæµç®¡ç†
- `/api/plugins/*` - æ’ä»¶ç®¡ç†
- `/api/menus/*` - èœå•ç®¡ç†

## ğŸ”§ å¼€å‘è¯´æ˜

### æ•°æ®åº“è¡¨ç»“æ„

æ•°æ®åº“è¡¨ä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºï¼ˆé€šè¿‡MyBatis Mapper XMLå’Œå®ä½“ç±»ï¼‰ã€‚ä¸»è¦è¡¨åŒ…æ‹¬ï¼š

- `users` - ç”¨æˆ·è¡¨
- `roles` - è§’è‰²è¡¨
- `menus` - èœå•è¡¨
- `agents` - æ™ºèƒ½ä½“è¡¨
- `knowledge_bases` - çŸ¥è¯†åº“è¡¨
- `knowledge_documents` - çŸ¥è¯†æ–‡æ¡£è¡¨
- `workflows` - å·¥ä½œæµè¡¨
- `workflow_executions` - å·¥ä½œæµæ‰§è¡Œè®°å½•è¡¨
- `plugins` - æ’ä»¶è¡¨

### æ—¥å¿—é…ç½®

- æ—¥å¿—é…ç½®æ–‡ä»¶: `backend/src/main/resources/logback/logback-spring.xml`
- æ—¥å¿—è¾“å‡ºç›®å½•: `backend/logs/`
- æ—¥å¿—çº§åˆ«: 
  - Root: INFO
  - com.aiagent: DEBUG
  - org.mybatis: DEBUG

### å®‰å…¨é…ç½®

- JWT Tokené…ç½®åœ¨ `application.yml` ä¸­
- å®‰å…¨é…ç½®ç±»: `SecurityConfig.java`
- JWTå·¥å…·ç±»: `JwtUtils.java`
- è®¤è¯è¿‡æ»¤å™¨: `JwtAuthenticationFilter.java`

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- ç¡®ä¿Dockerå®¹å™¨æ­£åœ¨è¿è¡Œ: `docker ps`
- æ£€æŸ¥ç«¯å£3306æ˜¯å¦è¢«å ç”¨
- éªŒè¯`application.yml`ä¸­çš„æ•°æ®åº“é…ç½®

### 2. åç«¯å¯åŠ¨å¤±è´¥
- æ£€æŸ¥Javaç‰ˆæœ¬æ˜¯å¦ä¸º21: `java -version`
- æ£€æŸ¥Mavenä¾èµ–æ˜¯å¦ä¸‹è½½å®Œæ•´: `mvn dependency:resolve`
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶: `backend/logs/error.log`

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯
- ç¡®è®¤åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆç«¯å£8082ï¼‰
- æ£€æŸ¥`vite.config.ts`ä¸­çš„ä»£ç†é…ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚

### 4. ç™»å½•åæ— æ³•è®¿é—®é¡µé¢
- æ£€æŸ¥JWT Tokenæ˜¯å¦æ­£ç¡®è®¾ç½®
- æŸ¥çœ‹åç«¯æ—¥å¿—ä¸­çš„è®¤è¯é”™è¯¯
- éªŒè¯ç”¨æˆ·è§’è‰²æ˜¯å¦æ­£ç¡®

## ğŸ“ é¡¹ç›®ç‰¹ç‚¹

1. **å‰åç«¯åˆ†ç¦»**: å‰ç«¯Vue3 + åç«¯Spring Boot
2. **JWTè®¤è¯**: æ— çŠ¶æ€è®¤è¯æœºåˆ¶
3. **è§’è‰²æƒé™**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
4. **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼ˆAgentã€KnowledgeBaseã€Workflowã€Pluginï¼‰
5. **DockeråŒ–æ•°æ®åº“**: ä½¿ç”¨Docker Composeç®¡ç†MySQLå’ŒphpMyAdmin
6. **è‡ªåŠ¨åˆå§‹åŒ–**: å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºé»˜è®¤ç”¨æˆ·å’Œèœå•

## ğŸ”„ å¼€å‘å·¥ä½œæµ

1. **ä¿®æ”¹åç«¯ä»£ç ** â†’ é‡å¯Spring Bootåº”ç”¨
2. **ä¿®æ”¹å‰ç«¯ä»£ç ** â†’ Viteä¼šè‡ªåŠ¨çƒ­é‡è½½
3. **ä¿®æ”¹æ•°æ®åº“ç»“æ„** â†’ æ›´æ–°å®ä½“ç±»å’ŒMapper XML
4. **æŸ¥çœ‹æ—¥å¿—** â†’ `backend/logs/` ç›®å½•

---

**é¡¹ç›®çŠ¶æ€**: âœ… å¯è¿è¡Œ

**æœ€åæ›´æ–°**: 2025-01-21

