# æ•°æ®åº“å¯¼å‡º/å¯¼å…¥è„šæœ¬å®ç°æµç¨‹è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

è¿™ä¸¤ä¸ªè„šæœ¬ç”¨äºåœ¨ Docker å®¹å™¨ä¸­å¯¼å‡ºå’Œå¯¼å…¥ MySQL æ•°æ®åº“ï¼Œå®ç°æ•°æ®åœ¨ä¸åŒç¯å¢ƒé—´çš„è¿ç§»ã€‚

---

## ğŸ”„ å¯¼å‡ºè„šæœ¬æµç¨‹ (`ops\scripts\export-database.bat` / `export-database.sh`)

### å®ç°æµç¨‹å›¾

```
å¼€å§‹
  â†“
æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
  â†“ (å¦) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æ˜¯)
æ£€æŸ¥ MySQL å®¹å™¨æ˜¯å¦å­˜åœ¨
  â†“ (å¦) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æ˜¯)
æ£€æŸ¥ MySQL å®¹å™¨æ˜¯å¦è¿è¡Œ
  â†“ (å¦) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æ˜¯)
åˆ›å»º database-backup ç›®å½•
  â†“
ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„æ–‡ä»¶å
  â†“
æ‰§è¡Œ mysqldump å¯¼å‡ºæ•°æ®åº“
  â†“ (å¤±è´¥) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æˆåŠŸ)
æ˜¾ç¤ºæˆåŠŸä¿¡æ¯å’Œæ–‡ä»¶ä½ç½®
  â†“
ç»“æŸ
```

### è¯¦ç»†æ­¥éª¤è¯´æ˜

#### 1. ç¯å¢ƒæ£€æŸ¥é˜¶æ®µ

**Windows ç‰ˆæœ¬ (`ops\scripts\export-database.bat`):**
```batch
# æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
docker ps >nul 2>&1
if %errorlevel% neq 0 (
    echo [é”™è¯¯] Docker æœªè¿è¡Œ
    exit /b 1
)
```

**Linux/Mac ç‰ˆæœ¬ (`export-database.sh`):**
```bash
# æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
if ! docker ps >/dev/null 2>&1; then
    echo "[é”™è¯¯] Docker æœªè¿è¡Œ"
    exit 1
fi
```

**ä½œç”¨**: ç¡®ä¿ Docker æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œå®¹å™¨å‘½ä»¤ã€‚

#### 2. å®¹å™¨æ£€æŸ¥é˜¶æ®µ

```batch
# æ£€æŸ¥å®¹å™¨æ˜¯å¦å­˜åœ¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰
docker ps -a | findstr "codehubix-mysql"

# æ£€æŸ¥å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
docker ps | findstr "codehubix-mysql"
```

**ä½œç”¨**: 
- ç¡®ä¿ MySQL å®¹å™¨å·²åˆ›å»º
- ç¡®ä¿å®¹å™¨æ­£åœ¨è¿è¡Œï¼ˆmysqldump éœ€è¦å®¹å™¨è¿è¡Œï¼‰

#### 3. ç›®å½•å‡†å¤‡é˜¶æ®µ

**Windows:**
```batch
if not exist "database-backup" mkdir database-backup
```

**Linux/Mac:**
```bash
mkdir -p database-backup
```

**ä½œç”¨**: åˆ›å»ºå¤‡ä»½æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ã€‚

#### 4. æ–‡ä»¶åç”Ÿæˆé˜¶æ®µ

**Windows:**
```batch
# è·å–æ—¥æœŸå’Œæ—¶é—´
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do set mydate=%%c-%%a-%%b
for /f "tokens=1-2 delims=: " %%a in ('time /t') do set mytime=%%a-%%b
set mytime=%mytime: =0%
set filename=database-backup\demo_db_backup_%mydate%_%mytime%.sql
```

**Linux/Mac:**
```bash
filename="database-backup/demo_db_backup_$(date +%Y%m%d_%H%M%S).sql"
```

**ä½œç”¨**: ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„å”¯ä¸€æ–‡ä»¶åï¼Œé¿å…è¦†ç›–ä¹‹å‰çš„å¤‡ä»½ã€‚

**ç¤ºä¾‹æ–‡ä»¶å**: `demo_db_backup_2025-11-25_14-30-45.sql`

#### 5. æ•°æ®åº“å¯¼å‡ºé˜¶æ®µ

**æ ¸å¿ƒå‘½ä»¤:**
```bash
docker exec codehubix-mysql mysqldump -u root -proot123456 demo_db > backup.sql
```

**å‘½ä»¤è§£æ:**
- `docker exec` - åœ¨è¿è¡Œä¸­çš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤
- `codehubix-mysql` - MySQL å®¹å™¨åç§°
- `mysqldump` - MySQL å®˜æ–¹å¤‡ä»½å·¥å…·
- `-u demo_user` - æ•°æ®åº“ç”¨æˆ·å
- `-pdemo_pass_123` - æ•°æ®åº“å¯†ç ï¼ˆæ³¨æ„ï¼š`-p` å’Œå¯†ç ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ï¼‰
- `demo_db` - è¦å¯¼å‡ºçš„æ•°æ®åº“å
- `> filename.sql` - å°†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶

**mysqldump å¯¼å‡ºå†…å®¹:**
- âœ… æ•°æ®åº“è¡¨ç»“æ„ï¼ˆCREATE TABLEï¼‰
- âœ… è¡¨æ•°æ®ï¼ˆINSERT INTOï¼‰
- âœ… ç´¢å¼•å®šä¹‰
- âœ… è§¦å‘å™¨ï¼ˆå¦‚æœæœ‰ï¼‰
- âœ… å­˜å‚¨è¿‡ç¨‹ï¼ˆå¦‚æœæœ‰ï¼‰

#### 6. ç»“æœéªŒè¯é˜¶æ®µ

```batch
if %errorlevel% equ 0 (
    echo [æˆåŠŸ] æ•°æ®åº“å¯¼å‡ºå®Œæˆï¼
) else (
    echo [é”™è¯¯] æ•°æ®åº“å¯¼å‡ºå¤±è´¥
)
```

**ä½œç”¨**: æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœï¼Œç»™å‡ºæˆåŠŸæˆ–å¤±è´¥æç¤ºã€‚

---

## ğŸ“¥ å¯¼å…¥è„šæœ¬æµç¨‹ (`ops\scripts\import-database.bat` / `import-database.sh`)

### å®ç°æµç¨‹å›¾

```
å¼€å§‹
  â†“
æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
  â†“ (å¦) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æ˜¯)
æ£€æŸ¥ MySQL å®¹å™¨æ˜¯å¦å­˜åœ¨
  â†“ (å¦) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æ˜¯)
æ£€æŸ¥ MySQL å®¹å™¨æ˜¯å¦è¿è¡Œ
  â†“ (å¦) â†’ è‡ªåŠ¨å¯åŠ¨å®¹å™¨ â†’ ç­‰å¾… 10 ç§’
  â†“ (æ˜¯)
æ£€æŸ¥ database-backup ç›®å½•
  â†“ (ä¸å­˜åœ¨) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (å­˜åœ¨)
åˆ—å‡ºå¯ç”¨çš„å¤‡ä»½æ–‡ä»¶
  â†“ (æ— æ–‡ä»¶) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æœ‰æ–‡ä»¶)
æç¤ºç”¨æˆ·é€‰æ‹©æ–‡ä»¶ï¼ˆæˆ–ä½¿ç”¨æœ€æ–°çš„ï¼‰
  â†“
éªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  â†“ (ä¸å­˜åœ¨) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (å­˜åœ¨)
è­¦å‘Šï¼šå°†è¦†ç›–ç°æœ‰æ•°æ®
  â†“
ç”¨æˆ·ç¡®è®¤ (y/N)
  â†“ (å¦) â†’ å–æ¶ˆæ“ä½œ â†’ é€€å‡º
  â†“ (æ˜¯)
æ‰§è¡Œ mysql å¯¼å…¥æ•°æ®åº“
  â†“ (å¤±è´¥) â†’ é”™è¯¯æç¤º â†’ é€€å‡º
  â†“ (æˆåŠŸ)
æ˜¾ç¤ºæˆåŠŸä¿¡æ¯
  â†“
æç¤ºé‡å¯åç«¯æœåŠ¡
  â†“
ç»“æŸ
```

### è¯¦ç»†æ­¥éª¤è¯´æ˜

#### 1-3. ç¯å¢ƒæ£€æŸ¥é˜¶æ®µï¼ˆåŒå¯¼å‡ºè„šæœ¬ï¼‰

æ£€æŸ¥ Docker å’Œå®¹å™¨çŠ¶æ€ã€‚

#### 4. å®¹å™¨è‡ªåŠ¨å¯åŠ¨ï¼ˆå¯¼å…¥è„šæœ¬ç‰¹æœ‰ï¼‰

**Windows:**
```batch
docker ps | findstr "codehubix-mysql" >nul 2>&1
if %errorlevel% neq 0 (
    echo [ä¿¡æ¯] MySQL å®¹å™¨æœªè¿è¡Œï¼Œæ­£åœ¨å¯åŠ¨...
    docker-compose up -d mysql
    timeout /t 10 /nobreak >nul
)
```

**Linux/Mac:**
```bash
if ! docker ps | grep -q "codehubix-mysql"; then
    echo "[ä¿¡æ¯] MySQL å®¹å™¨æœªè¿è¡Œï¼Œæ­£åœ¨å¯åŠ¨..."
    docker-compose up -d mysql
    sleep 10
fi
```

**ä½œç”¨**: å¦‚æœå®¹å™¨æœªè¿è¡Œï¼Œè‡ªåŠ¨å¯åŠ¨å¹¶ç­‰å¾… MySQL åˆå§‹åŒ–å®Œæˆã€‚

#### 5. å¤‡ä»½æ–‡ä»¶æ£€æŸ¥é˜¶æ®µ

**Windows:**
```batch
if not exist "database-backup" (
    echo [é”™è¯¯] database-backup ç›®å½•ä¸å­˜åœ¨
    exit /b 1
)

echo [ä¿¡æ¯] å¯ç”¨çš„å¤‡ä»½æ–‡ä»¶ï¼š
dir /b database-backup\*.sql
```

**Linux/Mac:**
```bash
if [ ! -d "database-backup" ]; then
    echo "[é”™è¯¯] database-backup ç›®å½•ä¸å­˜åœ¨"
    exit 1
fi

echo "[ä¿¡æ¯] å¯ç”¨çš„å¤‡ä»½æ–‡ä»¶ï¼š"
ls -1 database-backup/*.sql
```

**ä½œç”¨**: 
- æ£€æŸ¥å¤‡ä»½ç›®å½•æ˜¯å¦å­˜åœ¨
- åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ `.sql` å¤‡ä»½æ–‡ä»¶

#### 6. æ–‡ä»¶é€‰æ‹©é˜¶æ®µ

**Windows:**
```batch
set /p backup_file="è¯·è¾“å…¥è¦å¯¼å…¥çš„å¤‡ä»½æ–‡ä»¶åï¼ˆæˆ–ç›´æ¥å›è½¦ä½¿ç”¨æœ€æ–°çš„ï¼‰: "

if "%backup_file%"=="" (
    REM ä½¿ç”¨æœ€æ–°çš„å¤‡ä»½æ–‡ä»¶
    for /f "delims=" %%i in ('dir /b /o-d database-backup\*.sql 2^>nul') do (
        set backup_file=%%i
        goto :found
    )
)
```

**Linux/Mac:**
```bash
read -p "è¯·è¾“å…¥è¦å¯¼å…¥çš„å¤‡ä»½æ–‡ä»¶åï¼ˆæˆ–ç›´æ¥å›è½¦ä½¿ç”¨æœ€æ–°çš„ï¼‰: " backup_file

if [ -z "$backup_file" ]; then
    # ä½¿ç”¨æœ€æ–°çš„å¤‡ä»½æ–‡ä»¶
    backup_file=$(ls -t database-backup/*.sql | head -1)
    backup_file=$(basename "$backup_file")
fi
```

**é€»è¾‘è¯´æ˜:**
- å¦‚æœç”¨æˆ·è¾“å…¥æ–‡ä»¶åï¼Œä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„æ–‡ä»¶
- å¦‚æœç”¨æˆ·ç›´æ¥å›è½¦ï¼ˆç©ºè¾“å…¥ï¼‰ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€æ–°çš„æ–‡ä»¶
  - Windows: `dir /b /o-d` æŒ‰ä¿®æ”¹æ—¶é—´å€’åºæ’åˆ—
  - Linux/Mac: `ls -t` æŒ‰ä¿®æ”¹æ—¶é—´æ’åºï¼Œ`head -1` å–ç¬¬ä¸€ä¸ª

#### 7. æ–‡ä»¶éªŒè¯é˜¶æ®µ

```batch
if not exist "database-backup\%backup_file%" (
    echo [é”™è¯¯] æ–‡ä»¶ä¸å­˜åœ¨
    exit /b 1
)
```

**ä½œç”¨**: ç¡®ä¿ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ç¡®å®å­˜åœ¨ã€‚

#### 8. å®‰å…¨ç¡®è®¤é˜¶æ®µ

```batch
echo [è­¦å‘Š] å¯¼å…¥æ•°æ®å°†è¦†ç›–ç°æœ‰æ•°æ®åº“ï¼
echo [å¤‡ä»½æ–‡ä»¶] %backup_file%
set /p confirm="ç¡®è®¤å¯¼å…¥ï¼Ÿ(y/N): "
if /i not "%confirm%"=="y" (
    echo [å–æ¶ˆ] æ“ä½œå·²å–æ¶ˆ
    exit /b 0
)
```

**ä½œç”¨**: 
- âš ï¸ **é‡è¦å®‰å…¨æªæ–½**ï¼šè­¦å‘Šç”¨æˆ·å¯¼å…¥ä¼šè¦†ç›–ç°æœ‰æ•°æ®
- è¦æ±‚ç”¨æˆ·æ˜ç¡®ç¡®è®¤ï¼ˆè¾“å…¥ `y`ï¼‰
- é»˜è®¤æ˜¯ `N`ï¼ˆä¸å¯¼å…¥ï¼‰ï¼Œé˜²æ­¢è¯¯æ“ä½œ

#### 9. æ•°æ®åº“å¯¼å…¥é˜¶æ®µ

**æ ¸å¿ƒå‘½ä»¤:**
```bash
docker exec -i codehubix-mysql mysql -u demo_user -pdemo_pass_123 demo_db < "database-backup/backup_file.sql"
```

**å‘½ä»¤è§£æ:**
- `docker exec -i` - `-i` è¡¨ç¤ºäº¤äº’æ¨¡å¼ï¼Œå…è®¸ä»æ ‡å‡†è¾“å…¥è¯»å–
- `codehubix-mysql` - MySQL å®¹å™¨åç§°
- `mysql` - MySQL å®¢æˆ·ç«¯å‘½ä»¤
- `-u demo_user` - æ•°æ®åº“ç”¨æˆ·å
- `-pdemo_pass_123` - æ•°æ®åº“å¯†ç 
- `demo_db` - ç›®æ ‡æ•°æ®åº“å
- `< backup_file.sql` - ä»æ–‡ä»¶è¯»å– SQL è¯­å¥å¹¶æ‰§è¡Œ

**å¯¼å…¥è¿‡ç¨‹:**
1. è¯»å– SQL æ–‡ä»¶å†…å®¹
2. æ‰§è¡Œ `CREATE TABLE` è¯­å¥ï¼ˆå¦‚æœè¡¨ä¸å­˜åœ¨ï¼‰
3. æ‰§è¡Œ `DROP TABLE` æˆ– `TRUNCATE`ï¼ˆå¦‚æœè¡¨å·²å­˜åœ¨ï¼‰
4. æ‰§è¡Œ `INSERT INTO` è¯­å¥æ¢å¤æ•°æ®
5. é‡å»ºç´¢å¼•

**âš ï¸ æ³¨æ„**: å¯¼å…¥ä¼š**å®Œå…¨è¦†ç›–**ç›®æ ‡æ•°æ®åº“çš„ç°æœ‰æ•°æ®ï¼

#### 10. ç»“æœéªŒè¯å’Œåç»­æç¤º

```batch
if %errorlevel% equ 0 (
    echo [æˆåŠŸ] æ•°æ®åº“å¯¼å…¥å®Œæˆï¼
    echo [æç¤º] è¯·é‡å¯åç«¯æœåŠ¡
    echo [å‘½ä»¤] docker-compose restart backend
)
```

**ä½œç”¨**: 
- éªŒè¯å¯¼å…¥æ˜¯å¦æˆåŠŸ
- æç¤ºç”¨æˆ·é‡å¯åç«¯æœåŠ¡ï¼ˆå› ä¸ºæ•°æ®å·²æ›´æ–°ï¼‰

---

## ğŸ”‘ å…³é”®æŠ€æœ¯ç‚¹

### 1. Docker å‘½ä»¤æ‰§è¡Œ

**å¯¼å‡ºï¼ˆå®¹å™¨å†…æ‰§è¡Œï¼Œè¾“å‡ºåˆ°å®¿ä¸»æœºï¼‰:**
```bash
docker exec container_name command > host_file
```

**å¯¼å…¥ï¼ˆä»å®¿ä¸»æœºæ–‡ä»¶è¾“å…¥åˆ°å®¹å™¨ï¼‰:**
```bash
docker exec -i container_name command < host_file
```

**åŒºåˆ«:**
- å¯¼å‡ºï¼šå®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ï¼Œè¾“å‡ºé‡å®šå‘åˆ°å®¿ä¸»æœºæ–‡ä»¶
- å¯¼å…¥ï¼šä»å®¿ä¸»æœºæ–‡ä»¶è¯»å–ï¼Œé€šè¿‡ç®¡é“è¾“å…¥åˆ°å®¹å™¨å†…çš„å‘½ä»¤

### 2. mysqldump å·¥å…·

**åŠŸèƒ½**: MySQL å®˜æ–¹å¤‡ä»½å·¥å…·ï¼Œç”Ÿæˆ SQL æ ¼å¼çš„å¤‡ä»½æ–‡ä»¶

**å¯¼å‡ºå†…å®¹:**
```sql
-- è¡¨ç»“æ„
CREATE TABLE `users` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  ...
) ENGINE=InnoDB;

-- è¡¨æ•°æ®
INSERT INTO `users` VALUES (1, 'admin', ...);
INSERT INTO `users` VALUES (2, 'user', ...);
```

### 3. æ—¶é—´æˆ³ç”Ÿæˆ

**ç›®çš„**: é¿å…å¤‡ä»½æ–‡ä»¶è¢«è¦†ç›–ï¼Œä¿ç•™å†å²å¤‡ä»½

**Windows æ ¼å¼**: `2025-11-25_14-30-45`
**Linux/Mac æ ¼å¼**: `20251125_143045`

### 4. é”™è¯¯å¤„ç†

**Windows:**
```batch
command
if %errorlevel% neq 0 (
    echo é”™è¯¯å¤„ç†
    exit /b 1
)
```

**Linux/Mac:**
```bash
command
if [ $? -ne 0 ]; then
    echo "é”™è¯¯å¤„ç†"
    exit 1
fi
```

**ä½œç”¨**: æ¯ä¸€æ­¥éƒ½æ£€æŸ¥æ‰§è¡Œç»“æœï¼Œå¤±è´¥æ—¶ç«‹å³é€€å‡ºå¹¶æç¤ºé”™è¯¯ã€‚

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¼€å‘ç¯å¢ƒè¿ç§»

1. **æ—§ç”µè„‘**: è¿è¡Œ `ops\scripts\ops\scripts\export-database.bat` å¯¼å‡ºæ•°æ®
2. **å¤åˆ¶æ–‡ä»¶**: å°† `database-backup/*.sql` å¤åˆ¶åˆ°æ–°ç”µè„‘
3. **æ–°ç”µè„‘**: è¿è¡Œ `ops\scripts\ops\scripts\import-database.bat` å¯¼å…¥æ•°æ®

### åœºæ™¯ 2: æ•°æ®å¤‡ä»½

å®šæœŸè¿è¡Œå¯¼å‡ºè„šæœ¬ï¼Œä¿ç•™å†å²å¤‡ä»½ï¼š
```bash
# æ¯å¤©è‡ªåŠ¨å¤‡ä»½ï¼ˆä½¿ç”¨ä»»åŠ¡è®¡åˆ’å™¨/cronï¼‰
ops\scripts\export-database.bat
```

### åœºæ™¯ 3: æ•°æ®æ¢å¤

å¦‚æœæ•°æ®æŸåï¼Œä»å¤‡ä»½æ¢å¤ï¼š
```bash
ops\scripts\import-database.bat
# é€‰æ‹©ä¹‹å‰çš„å¤‡ä»½æ–‡ä»¶
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®è¦†ç›–**: å¯¼å…¥ä¼šå®Œå…¨è¦†ç›–ç°æœ‰æ•°æ®ï¼Œæ“ä½œå‰è¯·ç¡®è®¤
2. **å®¹å™¨çŠ¶æ€**: å¯¼å‡ºæ—¶å®¹å™¨å¿…é¡»è¿è¡Œï¼Œå¯¼å…¥æ—¶ä¼šè‡ªåŠ¨å¯åŠ¨
3. **æ–‡ä»¶è·¯å¾„**: å¤‡ä»½æ–‡ä»¶å¿…é¡»æ”¾åœ¨ `database-backup/` ç›®å½•ä¸‹
4. **æƒé™é—®é¢˜**: Linux/Mac éœ€è¦ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼š`chmod +x *.sh`
5. **æ–‡ä»¶å¤§å°**: å¤§å‹æ•°æ®åº“å¯¼å‡ºå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
6. **å­—ç¬¦ç¼–ç **: ç¡®ä¿ SQL æ–‡ä»¶ä½¿ç”¨ UTF-8 ç¼–ç 

---

## ğŸ”§ æ”¹è¿›å»ºè®®

### 1. å‹ç¼©å¤‡ä»½ï¼ˆèŠ‚çœç©ºé—´ï¼‰

```bash
# å¯¼å‡ºå¹¶å‹ç¼©
docker exec codehubix-mysql mysqldump -u demo_user -pdemo_pass_123 demo_db | gzip > backup.sql.gz

# å¯¼å…¥å‹ç¼©æ–‡ä»¶
gunzip < backup.sql.gz | docker exec -i codehubix-mysql mysql -u demo_user -pdemo_pass_123 demo_db
```

### 2. åªå¯¼å‡ºæ•°æ®ï¼ˆä¸åŒ…å«ç»“æ„ï¼‰

```bash
mysqldump --no-create-info demo_db  # åªå¯¼å‡ºæ•°æ®
mysqldump --no-data demo_db          # åªå¯¼å‡ºç»“æ„
```

### 3. å¢é‡å¤‡ä»½

ä½¿ç”¨ MySQL binlog å®ç°å¢é‡å¤‡ä»½ï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰ã€‚

---

## ğŸ“ æ€»ç»“

è¿™ä¸¤ä¸ªè„šæœ¬å®ç°äº†å®Œæ•´çš„æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤æµç¨‹ï¼š

- âœ… **å¯¼å‡ºè„šæœ¬**: è‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒ â†’ ç”Ÿæˆæ—¶é—´æˆ³æ–‡ä»¶å â†’ æ‰§è¡Œ mysqldump â†’ ä¿å­˜å¤‡ä»½
- âœ… **å¯¼å…¥è„šæœ¬**: è‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒ â†’ åˆ—å‡ºå¤‡ä»½æ–‡ä»¶ â†’ ç”¨æˆ·é€‰æ‹© â†’ å®‰å…¨ç¡®è®¤ â†’ æ‰§è¡Œå¯¼å…¥ â†’ æç¤ºé‡å¯

**æ ¸å¿ƒä¼˜åŠ¿**:
- è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå‡å°‘äººå·¥æ“ä½œ
- å®‰å…¨ç¡®è®¤æœºåˆ¶ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- è·¨å¹³å°æ”¯æŒï¼ˆWindows/Linux/Macï¼‰
- å‹å¥½çš„é”™è¯¯æç¤ºå’Œç”¨æˆ·äº¤äº’

